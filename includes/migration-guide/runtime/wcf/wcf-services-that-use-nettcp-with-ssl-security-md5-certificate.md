### <a name="wcf-services-that-use-nettcp-with-ssl-security-and-md5-certificate-authentication"></a>Службы WCF, использующих NETTCP с безопасностью SSL и проверка подлинности сертификатов MD5

|   |   |
|---|---|
|Подробные сведения|В платформе .NET Framework 4.6 в список протоколов WCF SSL по умолчанию добавляются протоколы TLS 1.1 и TLS 1.2. Когда клиентские и серверные компьютеры .NET Framework 4.6 или более поздней версии, TLS 1.2, используются для согласования. Проверка подлинности сертификатов MD5 не поддерживает TLS 1.2. Поэтому, если используется сертификат MD5, клиент WCF не сможет подключиться к службе WCF.|
|Предложение|Эту проблему можно решить, чтобы клиент WCF мог подключиться к серверу WCF, выполнив любое из следующих действий.<ul><li>Обновите сертификат, чтобы он не использовал алгоритм MD5. Это рекомендуемое решение.</li><li>Если привязка не настроена динамически в исходном коде, обновите файл конфигурации приложения, чтобы использовать TLS 1.1 или более раннюю версию протокола. Это позволяет продолжать использовать сертификат с хэш-алгоритмом MD5.</li></ul> <blockquote> [!WARNING] Это решение не рекомендуется, поскольку сертификат с хэш-алгоритмом MD5 считается небезопасным.</blockquote> Это выполняется в следующем файле конфигурации:<pre><code class="language-xml">&lt;configuration&gt;&#13;&#10;&lt;system.serviceModel&gt;&#13;&#10;&lt;bindings&gt;&#13;&#10;&lt;netTcpBinding&gt;&#13;&#10;&lt;binding&gt;&#13;&#10;&lt;security mode= &quot;None/Transport/Message/TransportWithMessageCredential&quot; &gt;&#13;&#10;&lt;transport clientCredentialType=&quot;None/Windows/Certificate&quot;&#13;&#10;protectionLevel=&quot;None/Sign/EncryptAndSign&quot;&#13;&#10;sslProtocols=&quot;Ssl3/Tls1/Tls11&quot;&gt;&#13;&#10;&lt;/transport&gt;&#13;&#10;&lt;/security&gt;&#13;&#10;&lt;/binding&gt;&#13;&#10;&lt;/netTcpBinding&gt;&#13;&#10;&lt;/bindings&gt;&#13;&#10;&lt;/system.ServiceModel&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><ul><li>Если привязка настроена динамически в исходном коде, обновить <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols?displayProperty=nameWithType> свойство для использования TLS 1.1 (<xref:System.Security.Authentication.SslProtocols.Tls11?displayProperty=nameWithType> или более ранней версией протокола в исходном коде.</li></ul> <blockquote> [!WARNING] Это решение не рекомендуется, поскольку сертификат с хэш-алгоритмом MD5 считается небезопасным.</blockquote> |
|Область|Дополнительный номер|
|Версия|4.6|
|Тип|Среда выполнения|

