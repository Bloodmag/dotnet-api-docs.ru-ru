<Type Name="MachineKey" FullName="System.Web.Security.MachineKey">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="79408eb1da4e4e1007df647cc3d7b097561d220e" />
    <Meta Name="ms.sourcegitcommit" Value="d31dc2ede16f6f7bc64e90d9f897ff54c4e3869b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="ru-RU" />
    <Meta Name="ms.lasthandoff" Value="04/03/2018" />
    <Meta Name="ms.locfileid" Value="30546328" />
  </Metadata>
  <TypeSignature Language="C#" Value="public static class MachineKey" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi abstract sealed beforefieldinit MachineKey extends System.Object" />
  <TypeSignature Language="DocId" Value="T:System.Web.Security.MachineKey" />
  <TypeSignature Language="VB.NET" Value="Public Class MachineKey" />
  <TypeSignature Language="C++ CLI" Value="public ref class MachineKey abstract sealed" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Object</BaseTypeName>
  </Base>
  <Interfaces />
  <Docs>
    <summary>Предоставляет способ шифрования или хэширования данных (либо шифрования и хэширования) с помощью тех же алгоритмов и значений ключей, которые используются для проверки подлинности форм ASP.NET и состояния просмотра.</summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <xref:System.Web.Security.MachineKey> Класс предоставляет методы, которые предоставляют логику хеширования и шифрования, ASP.NET предоставляет. Сведения о какой алгоритмами шифрования и хэширования, используемого ASP.NET и значения ключей, используемых с ними см. в разделе [machineKey (схема параметров ASP.NET) элемент](http://msdn.microsoft.com/library/4b5699a9-bc21-4c4a-85f1-8b3b8ebd2d46).  
  
> [!WARNING]
>  <xref:System.Web.Security.MachineKey> API-интерфейсов можно использовать только в приложении ASP.NET. Поведение API-интерфейсов MachineKey вне контекста приложения ASP.NET не определено  
  
 ]]></format>
    </remarks>
    <exception cref="T:System.ArgumentNullException">Данные для шифрования, хэширования, расшифровки или проверки не существуют.</exception>
  </Docs>
  <Members>
    <Member MemberName="Decode">
      <MemberSignature Language="C#" Value="public static byte[] Decode (string encodedData, System.Web.Security.MachineKeyProtection protectionOption);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig unsigned int8[] Decode(string encodedData, valuetype System.Web.Security.MachineKeyProtection protectionOption) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.Security.MachineKey.Decode(System.String,System.Web.Security.MachineKeyProtection)" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function Decode (encodedData As String, protectionOption As MachineKeyProtection) As Byte()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static cli::array &lt;System::Byte&gt; ^ Decode(System::String ^ encodedData, System::Web::Security::MachineKeyProtection protectionOption);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.Obsolete("This method is obsolete and is only provided for compatibility with existing code. It is recommended that new code use the Protect and Unprotect methods instead.")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Byte[]</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="encodedData" Type="System.String" />
        <Parameter Name="protectionOption" Type="System.Web.Security.MachineKeyProtection" />
      </Parameters>
      <Docs>
        <param name="encodedData">Зашифрованные данные для расшифровки и(или) проверки.</param>
        <param name="protectionOption">Указывает, должен ли шифроваться или хэшироваться параметр <c>encodedData</c>.</param>
        <summary>Декодирует и/или проверяет данные, зашифрованные или предоставленные с помощью HMAC.</summary>
        <returns>Массив <see cref="T:System.Byte" />, представляющий расшифрованные данные.</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 Сведения о какой шифрование и хэш-алгоритмы, используемого ASP.NET для расшифровки и проверки данных, которые передаются в см. [machineKey (схема параметров ASP.NET) элемент](http://msdn.microsoft.com/library/4b5699a9-bc21-4c4a-85f1-8b3b8ebd2d46).  
  
   
  
## Examples  
 Пример кода см. в разделе <xref:System.Web.Security.MachineKey> Общие сведения о классе.  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Encode">
      <MemberSignature Language="C#" Value="public static string Encode (byte[] data, System.Web.Security.MachineKeyProtection protectionOption);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig string Encode(unsigned int8[] data, valuetype System.Web.Security.MachineKeyProtection protectionOption) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.Security.MachineKey.Encode(System.Byte[],System.Web.Security.MachineKeyProtection)" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function Encode (data As Byte(), protectionOption As MachineKeyProtection) As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static System::String ^ Encode(cli::array &lt;System::Byte&gt; ^ data, System::Web::Security::MachineKeyProtection protectionOption);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.Obsolete("This method is obsolete and is only provided for compatibility with existing code. It is recommended that new code use the Protect and Unprotect methods instead.")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="data" Type="System.Byte[]" />
        <Parameter Name="protectionOption" Type="System.Web.Security.MachineKeyProtection" />
      </Parameters>
      <Docs>
        <param name="data">Данные, которые необходимо зашифровать.</param>
        <param name="protectionOption">Указывает, должен ли шифроваться или хэшироваться параметр <c>data</c>.</param>
        <summary>Зашифровывает данных и/или добавляет код HMAC.</summary>
        <returns>Зашифрованное значение, входное значение с добавленным кодом HMAC или результат шифрования входного значения с добавленным кодом HMAC.</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 Сведения о какой шифрование и хэш-алгоритмы, используемого ASP.NET для расшифровки и проверки данных, которые передаются в см. [machineKey (схема параметров ASP.NET) элемент](http://msdn.microsoft.com/library/4b5699a9-bc21-4c4a-85f1-8b3b8ebd2d46).  
  
   
  
## Examples  
 Пример кода см. в разделе <xref:System.Web.Security.MachineKey> Общие сведения о классе.  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Protect">
      <MemberSignature Language="C#" Value="public static byte[] Protect (byte[] userData, params string[] purposes);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig unsigned int8[] Protect(unsigned int8[] userData, string[] purposes) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.Security.MachineKey.Protect(System.Byte[],System.String[])" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function Protect (userData As Byte(), ParamArray purposes As String()) As Byte()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static cli::array &lt;System::Byte&gt; ^ Protect(cli::array &lt;System::Byte&gt; ^ userData, ... cli::array &lt;System::String ^&gt; ^ purposes);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Byte[]</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="userData" Type="System.Byte[]" />
        <Parameter Name="purposes" Type="System.String[]">
          <Attributes>
            <Attribute>
              <AttributeName>System.ParamArray</AttributeName>
            </Attribute>
          </Attributes>
        </Parameter>
      </Parameters>
      <Docs>
        <param name="userData">Данные, защиту которых требуется обеспечить. Эти данные передаются в виде простого текста.</param>
        <param name="purposes">Список целей данных. Если это значение задано, то один и тот же список должен быть передан в метод <see cref="M:System.Web.Security.MachineKey.Unprotect(System.Byte[],System.String[])" /> для расшифровки возвращаемых зашифрованных данных.</param>
        <summary>Защищает указанные данные путем шифрования или подписи.</summary>
        <returns>Сведения о зашифрованного текста.</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 Этот метод заменяет <xref:System.Web.Security.MachineKey.Encode%2A> метод, который требуется вызвавший его объект для указания ли зашифрованные данные должны шифроваться, подписываться или оба. <xref:System.Web.Security.MachineKey.Protect%2A> Метод выполняет соответствующую операцию и надежно защищает данные. Зашифрованные данные, созданные с помощью данного метода можно расшифровать только с <xref:System.Web.Security.MachineKey.Unprotect%2A> метод.  
  
 `purposes` Параметр — необязательный список причин, можно заблокировать зашифрованного текста для определенной цели. Этот параметр позволяет изолировать криптографических операций, выполненных разные подсистемы в приложении. Вредоносный клиент не должен получать получить результат одну подсистему <xref:System.Web.Security.MachineKey.Protect%2A> метод или веб-канал, ее в качестве входных данных для другой подсистемы <xref:System.Web.Security.MachineKey.Unprotect%2A> метод, который может нанести ущерб безопасности приложения. `purposes` Параметр гарантирует, что защищенные данные могут использоваться только компонентом, изначально созданного. Приложения следует убедиться в том, что каждой подсистемы использует уникальный `purposes` списка.  
  
 Например чтобы установка или снятие защиты маркер проверки подлинности, следует вызвать метод с помощью кода, как в следующем примере:  
  
```csharp  
MachineKey.Protect(..., "Authentication token");  
MachineKey.Unprotect(..., "Authentication token");  
```  
  
```vb  
MachineKey.Protect(..., "Authentication token")  
MachineKey.Unprotect(..., "Authentication token")  
```  
  
 Приложения, можно создать динамически `purposes` параметра. В этом случае префикса введенных пользователем значений с фиксированным значением (как «`Username:` "+ *username*) чтобы свести к минимуму риск создания входные данные, соответствующие маркер, который использует другие части системы вредоносный клиент. Все строки, динамически создаются должна находиться после фиксированной строки. Например чтобы установка или снятие защиты закрытого сообщения, привязанного к конкретному пользователю, используйте код, как в следующем примере:  
  
```csharp  
MachineKey.Protect(..., "Private message", "Recipient: " + username);  
MachineKey.Unprotect(..., "Private message", "Recipient: " + username);  
```  
  
```vb  
MachineKey.Protect(..., "Private message", "Recipient: " + username)  
MachineKey.Unprotect(..., "Private message", "Recipient: " + username)  
```  
  
 Когда <xref:System.Web.Security.MachineKey.Unprotect%2A> вызывается метод, значение, предоставленное для `purposes` параметр должен иметь то же значение, которая была предоставлена <xref:System.Web.Security.MachineKey.Protect%2A> метод. В противном случае операция завершится с <xref:System.Security.Cryptography.CryptographicException> исключение.  
  
 Параметры конфигурации, которые необходимы для <xref:System.Web.Configuration.MachineKeyCompatibilityMode.Framework45?displayProperty=nameWithType> параметра являются обязательными для этого метода даже в том случае, если <xref:System.Web.Configuration.MachineKeySection.CompatibilityMode%2A?displayProperty=nameWithType> не задано значение <xref:System.Web.Configuration.MachineKeyCompatibilityMode.Framework45> параметр.  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">Параметр <paramref name="userData" /> имеет значение null.</exception>
        <exception cref="T:System.ArgumentException">Массив назначений содержит одну или несколько записей, содержащих только пробельные символы.</exception>
      </Docs>
    </Member>
    <Member MemberName="Unprotect">
      <MemberSignature Language="C#" Value="public static byte[] Unprotect (byte[] protectedData, params string[] purposes);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig unsigned int8[] Unprotect(unsigned int8[] protectedData, string[] purposes) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.Security.MachineKey.Unprotect(System.Byte[],System.String[])" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function Unprotect (protectedData As Byte(), ParamArray purposes As String()) As Byte()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static cli::array &lt;System::Byte&gt; ^ Unprotect(cli::array &lt;System::Byte&gt; ^ protectedData, ... cli::array &lt;System::String ^&gt; ^ purposes);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Byte[]</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="protectedData" Type="System.Byte[]" />
        <Parameter Name="purposes" Type="System.String[]">
          <Attributes>
            <Attribute>
              <AttributeName>System.ParamArray</AttributeName>
            </Attribute>
          </Attributes>
        </Parameter>
      </Parameters>
      <Docs>
        <param name="protectedData">Данные зашифрованного текста, защиту которых требуется отменить.</param>
        <param name="purposes">Список целей, которые описывают, для чего данные предполагается. Это значение должно быть одинаковым со значением, которое было передано методу <see cref="M:System.Web.Security.MachineKey.Protect(System.Byte[],System.String[])" /> при защите данных.</param>
        <summary>Снимает защиту с указанных данных, которые были защищены методом <see cref="M:System.Web.Security.MachineKey.Protect(System.Byte[],System.String[])" />.</summary>
        <returns>Данные обычного текста.</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 Сведения об этом методе см. в разделе <xref:System.Web.Security.MachineKey.Protect%2A> метод.  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">Параметр <paramref name="protectedData" /> имеет значение null.</exception>
        <exception cref="T:System.ArgumentException">Массив назначений содержит одну или несколько записей, содержащих только пробельные символы.</exception>
        <exception cref="T:System.Security.Cryptography.CryptographicException">Ниже представлены возможные причины.  
  
-   Защищенные данные были изменены злоумышленником.  
  
-   Значение параметра <paramref name="purposes" /> не совпадает со значением, заданным при защите данных.  
  
-   Приложение развернуто на более чем одном сервере и использует автоматически созданные ключей шифрования.</exception>
      </Docs>
    </Member>
  </Members>
</Type>