<Type Name="MarkupExtension" FullName="System.Windows.Markup.MarkupExtension">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="f36d9706c5d26b97dcc9537ee7078eceaf138fc8" />
    <Meta Name="ms.sourcegitcommit" Value="d31dc2ede16f6f7bc64e90d9f897ff54c4e3869b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="ru-RU" />
    <Meta Name="ms.lasthandoff" Value="04/03/2018" />
  </Metadata>
  <TypeSignature Language="C#" Value="public abstract class MarkupExtension" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi abstract beforefieldinit MarkupExtension extends System.Object" />
  <TypeSignature Language="DocId" Value="T:System.Windows.Markup.MarkupExtension" />
  <TypeSignature Language="VB.NET" Value="Public MustInherit Class MarkupExtension" />
  <TypeSignature Language="C++ CLI" Value="public ref class MarkupExtension abstract" />
  <AssemblyInfo>
    <AssemblyName>System.Xaml</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Object</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute>
      <AttributeName>System.Runtime.CompilerServices.TypeForwardedFrom("WindowsBase, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary>
      <span data-ttu-id="352e9-101">Предоставляет базовый класс для реализаций расширений разметки XAML, которые могут поддерживаться службами XAML платформы .NET Framework и другими средствами чтения и записи XAML.</span>
      <span class="sxs-lookup">
        <span data-stu-id="352e9-101">Provides a base class for XAML markup extension implementations that can be supported by .NET Framework XAML Services and other XAML readers and XAML writers.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="352e9-102">Расширения разметки возвращают объекты вызывающим объектам, на основе ввода значений атрибутов строки или элементов разметки в XAML.</span><span class="sxs-lookup"><span data-stu-id="352e9-102">Markup extensions return objects to callers, based on the input of string attribute values or markup elements in XAML.</span></span> <span data-ttu-id="352e9-103">Расширения разметки возвращают объекты в более сложных так, как можно выполнить только преобразователей типов.</span><span class="sxs-lookup"><span data-stu-id="352e9-103">Markup extensions return objects in a more sophisticated way than type converters alone can accomplish.</span></span> <span data-ttu-id="352e9-104">Средство записи объектов XAML вызывает преобразователь типов, так как тип или член имеет реализация преобразователя типов, связанных с ним.</span><span class="sxs-lookup"><span data-stu-id="352e9-104">A XAML object writer invokes a type converter because a type or member has a type converter implementation associated with it.</span></span> <span data-ttu-id="352e9-105">Из среды CLR для ссылок, это означает, что тип или член является <xref:System.ComponentModel.TypeConverterAttribute> атрибутами.</span><span class="sxs-lookup"><span data-stu-id="352e9-105">From the CLR frame of reference, this means that a type or member is <xref:System.ComponentModel.TypeConverterAttribute> attributed.</span></span> <span data-ttu-id="352e9-106">С точки зрения системы типов XAML, это означает, что тип или член XAML имеет значение для его `TypeConverter` свойство.</span><span class="sxs-lookup"><span data-stu-id="352e9-106">From the XAML type system perspective, this means that a XAML type or a XAML member has a value for its `TypeConverter` property.</span></span> <span data-ttu-id="352e9-107">Вызов преобразователя типов привязан к определению типа или свойства и всегда вызывается в этих случаях обработки XAML.</span><span class="sxs-lookup"><span data-stu-id="352e9-107">The invocation of a type converter is tied to the type or property definition, and is always invoked by XAML processing for these cases.</span></span> <span data-ttu-id="352e9-108">В отличие от этого расширения разметки несколько в группе управления из пользовательского кода и разметки, созданной пользователем и могут применяться каждый раз, когда требует сценарий приложения.</span><span class="sxs-lookup"><span data-stu-id="352e9-108">In contrast, a markup extension is more under the control of user code and user-produced markup, and can be applied whenever an application scenario demands it.</span></span> <span data-ttu-id="352e9-109">Расширения разметки может вызываться и может использоваться для задания значений другой член типа, при условии, что это значение назначается возвращаемого типа расширения разметки.</span><span class="sxs-lookup"><span data-stu-id="352e9-109">A markup extension can be invoked and can be used for setting different type-member values, so long as the markup extension's return type is assignable to that value.</span></span>  
  
 <span data-ttu-id="352e9-110">Сведения о создании пользовательского расширения разметки см. в разделе <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="352e9-110">For information on creating a custom markup extension, see <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span></span> <span data-ttu-id="352e9-111">Дополнительные сведения о расширениях разметки в целом см. в разделе [расширения разметки для XAML Обзор](~/docs/framework/xaml-services/markup-extensions-for-xaml-overview.md).</span><span class="sxs-lookup"><span data-stu-id="352e9-111">For more information on markup extensions in general, see [Markup Extensions for XAML Overview](~/docs/framework/xaml-services/markup-extensions-for-xaml-overview.md).</span></span> <span data-ttu-id="352e9-112">При создании в WPF и использование или Создание расширений разметки для XAML актуальную информацию можно найти в разделе [расширения разметки и WPF XAML](~/docs/framework/wpf/advanced/markup-extensions-and-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="352e9-112">If you are building on WPF and using or creating markup extensions for XAML, other relevant information can be found in the topic [Markup Extensions and WPF XAML](~/docs/framework/wpf/advanced/markup-extensions-and-wpf-xaml.md).</span></span>  
  
 <span data-ttu-id="352e9-113"><xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> Можно использовать метод каждой реализации расширения разметки <xref:System.IServiceProvider> во время выполнения, которая может предоставить контекст.</span><span class="sxs-lookup"><span data-stu-id="352e9-113">The <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> method of each markup extension implementation can use an <xref:System.IServiceProvider> at run time that can provide context.</span></span> <span data-ttu-id="352e9-114">Это <xref:System.IServiceProvider> запрашиваться для определенных служб, передающих данные, такие как <xref:System.Windows.Markup.IProvideValueTarget> или <xref:System.Windows.Markup.IXamlTypeResolver>.</span><span class="sxs-lookup"><span data-stu-id="352e9-114">This  <xref:System.IServiceProvider> is then queried for specific services that pass information, such as <xref:System.Windows.Markup.IProvideValueTarget> or <xref:System.Windows.Markup.IXamlTypeResolver>.</span></span> <span data-ttu-id="352e9-115">Дополнительные сведения о контекстах службы для расширения разметки см. в разделе [служебные контексты, доступные для расширений разметки и преобразователей типов](~/docs/framework/xaml-services/service-contexts-available-to-type-converters-and-markup-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="352e9-115">For more information on service contexts for a markup extension, see [Service Contexts Available to Type Converters and Markup Extensions](~/docs/framework/xaml-services/service-contexts-available-to-type-converters-and-markup-extensions.md).</span></span>  
  
 <span data-ttu-id="352e9-116">Производные классы должны иметь атрибут <xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute> для информирования потребителей наиболее подходящим возвращаемого типа из расширения разметки <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> реализации.</span><span class="sxs-lookup"><span data-stu-id="352e9-116">Derived classes should be attributed with <xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute> to inform consumers of the most specific return type available from the markup extension's <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> implementation.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="protected MarkupExtension ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Windows.Markup.MarkupExtension.#ctor" />
      <MemberSignature Language="VB.NET" Value="Protected Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; MarkupExtension();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Xaml</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="352e9-117">Инициализирует новый экземпляр класса, производного от класса <see cref="T:System.Windows.Markup.MarkupExtension" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="352e9-117">Initializes a new instance of a class derived from <see cref="T:System.Windows.Markup.MarkupExtension" />.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="352e9-118"><xref:System.Windows.Markup.MarkupExtension> Абстрактного класса не удерживает закрытые значения, в которых требуется инициализация.</span><span class="sxs-lookup"><span data-stu-id="352e9-118">The <xref:System.Windows.Markup.MarkupExtension> abstract class does not hold any private values that require initialization.</span></span>  
  
 ]]></format>
        </remarks>
        <block subset="none" type="overrides">
          <para>
            <span data-ttu-id="352e9-119">Расширения функциональности разметки следует определить свой собственный открытый конструктор по умолчанию.</span>
            <span class="sxs-lookup">
              <span data-stu-id="352e9-119">A functional markup extension should define its own public default constructor.</span>
            </span>
            <span data-ttu-id="352e9-120">Кроме того расширения разметки должны реализовывать конструкторы, которые подходят для предполагаемых возможностей расширения и разметки.</span>
            <span class="sxs-lookup">
              <span data-stu-id="352e9-120">Additionally, the markup extension should implement constructors that are appropriate for the extension's intended capabilities and markup usage.</span>
            </span>
            <span data-ttu-id="352e9-121">Дополнительные сведения см. в разделе [расширения разметки для XAML Обзор](~/docs/framework/xaml-services/markup-extensions-for-xaml-overview.md).</span>
            <span class="sxs-lookup">
              <span data-stu-id="352e9-121">For more information, see [Markup Extensions for XAML Overview](~/docs/framework/xaml-services/markup-extensions-for-xaml-overview.md).</span>
            </span>
          </para>
        </block>
      </Docs>
    </Member>
    <Member MemberName="ProvideValue">
      <MemberSignature Language="C#" Value="public abstract object ProvideValue (IServiceProvider serviceProvider);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance object ProvideValue(class System.IServiceProvider serviceProvider) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Windows.Markup.MarkupExtension.ProvideValue(System.IServiceProvider)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function ProvideValue (serviceProvider As IServiceProvider) As Object" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract System::Object ^ ProvideValue(IServiceProvider ^ serviceProvider);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Xaml</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Object</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="serviceProvider" Type="System.IServiceProvider" />
      </Parameters>
      <Docs>
        <param name="serviceProvider">
          <span data-ttu-id="352e9-122">Вспомогательный объект поставщика служб, способный предоставлять службы для расширения разметки.</span>
          <span class="sxs-lookup">
            <span data-stu-id="352e9-122">A service provider helper that can provide services for the markup extension.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="352e9-123">При реализации в производном классе возвращает объект, предоставляемый как значение целевого свойства для данного расширения разметки.</span>
          <span class="sxs-lookup">
            <span data-stu-id="352e9-123">When implemented in a derived class, returns an object that is provided as the value of the target property for this markup extension.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="352e9-124">Значение объекта, которое необходимо присвоить свойству, где применяется расширение.</span>
          <span class="sxs-lookup">
            <span data-stu-id="352e9-124">The object value to set on the property where the extension is applied.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="352e9-125">Когда обработчик XAML обрабатывает значение узла и член типа, является расширением разметки, он вызывает <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> метод этого расширения разметки и записывает результат в поток графика или сериализации объекта.</span><span class="sxs-lookup"><span data-stu-id="352e9-125">When a XAML processor processes a type node and member value that is a markup extension, it invokes the <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> method of that markup extension and writes the result into the object graph or serialization stream.</span></span> <span data-ttu-id="352e9-126">Средство записи объектов XAML передает контекст службы для каждой такой реализации через `serviceProvider` параметра.</span><span class="sxs-lookup"><span data-stu-id="352e9-126">The XAML object writer passes service context to each such implementation through the `serviceProvider` parameter.</span></span>  
  
 <span data-ttu-id="352e9-127">См. раздел «Примечания для реализации» Дополнительные сведения о том, как реализовать <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> в пользовательское расширение разметки.</span><span class="sxs-lookup"><span data-stu-id="352e9-127">See "Notes to Implementers" section for more information on how to implement <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> in a custom markup extension.</span></span>  
  
## <a name="wpf-usage-notes"></a><span data-ttu-id="352e9-128">Примечания об использовании WPF</span><span class="sxs-lookup"><span data-stu-id="352e9-128">WPF Usage Notes</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="352e9-129">Классы WPF, которые имеют определенные взаимодействия с множествами разметки не следует полагаться на <xref:System.Windows.Markup.IReceiveMarkupExtension> для [!INCLUDE[net_v40_short](~/includes/net-v40-short-md.md)] реализации.</span><span class="sxs-lookup"><span data-stu-id="352e9-129">WPF classes that have specific interactions with markup set operations should not rely on <xref:System.Windows.Markup.IReceiveMarkupExtension> for a [!INCLUDE[net_v40_short](~/includes/net-v40-short-md.md)] implementation.</span></span> <span data-ttu-id="352e9-130">Используйте <xref:System.Windows.Markup.XamlSetMarkupExtensionAttribute>-вместо этого обратные вызовы с атрибутами.</span><span class="sxs-lookup"><span data-stu-id="352e9-130">Use <xref:System.Windows.Markup.XamlSetMarkupExtensionAttribute>-attributed callbacks instead.</span></span>  
  
 ]]></format>
        </remarks>
        <block subset="none" type="overrides">
          <para>
            <span data-ttu-id="352e9-131">Общие службы, возвращенные поставщиком по умолчанию службы, обычно доступные для пользовательской или существующей <see cref="T:System.Windows.Markup.MarkupExtension" /> реализации включают следующие основные службы.</span>
            <span class="sxs-lookup">
              <span data-stu-id="352e9-131">Common services returned by the default service provider that is typically available to a custom or existing <see cref="T:System.Windows.Markup.MarkupExtension" /> implementation include the following primary services.</span>
            </span>  
  
-   <span data-ttu-id="352e9-132"><see cref="T:System.Windows.Markup.IProvideValueTarget" /> сообщает, ссылка на объект и свойство идентификатора из контекста, в которых используется расширение разметки</span><span class="sxs-lookup"><span data-stu-id="352e9-132"><see cref="T:System.Windows.Markup.IProvideValueTarget" /> reports the object reference and a property identifier from the context where the markup extension is used</span></span>  
  
-   <span data-ttu-id="352e9-133"><see cref="T:System.Windows.Markup.IXamlTypeResolver" /> предоставляет службу, которая копирует запись поведение, которое может предоставить общие объектов XAML <see cref="T:System.Type" /> на основе имени типа XAML.</span><span class="sxs-lookup"><span data-stu-id="352e9-133"><see cref="T:System.Windows.Markup.IXamlTypeResolver" /> exposes a service that parallels the general XAML object writing behavior that can provide a <see cref="T:System.Type" /> based on a XAML type name.</span></span><span data-ttu-id="352e9-134">При необходимости, имя может включать префикс для сопоставленного пространства имен XAML.</span><span class="sxs-lookup"><span data-stu-id="352e9-134">The name can optionally include a prefix for a mapped XAML namespace.</span></span>  
  
-   <span data-ttu-id="352e9-135"><see cref="T:System.Xaml.IXamlSchemaContextProvider" /> предоставляет контекст активной схемы XAML напрямую.</span><span class="sxs-lookup"><span data-stu-id="352e9-135"><see cref="T:System.Xaml.IXamlSchemaContextProvider" /> exposes the active XAML schema context directly.</span></span><span data-ttu-id="352e9-136">Из отчета <see cref="T:System.Xaml.XamlSchemaContext" />, можно получить XAML сведения о контексте схемы таких как сборки, сопоставленных для поддержки типов, предпочтительный префикс в сборках, перечислены каждого <see cref="T:System.Xaml.XamlType" /> в сборки и т. д.</span><span class="sxs-lookup"><span data-stu-id="352e9-136">From the reported <see cref="T:System.Xaml.XamlSchemaContext" />, you can obtain XAML schema context information such as how assemblies are mapped for type support, preferred prefix in assemblies, lists of each <see cref="T:System.Xaml.XamlType" /> in an assembly, and so on.</span></span>  
  
-   <span data-ttu-id="352e9-137">Другие службы, доступные для более специализированных сценариев расширения разметки включают:</span><span class="sxs-lookup"><span data-stu-id="352e9-137">Other services available for more specialized markup extension scenarios include:</span></span>  
  
    -   <see cref="T:System.Windows.Markup.IUriContext" />  
  
    -   <see cref="T:System.Xaml.IAmbientProvider" />  
  
    -   <see cref="T:System.Xaml.IDestinationTypeProvider" />  
  
    -   <see cref="T:System.Xaml.IRootObjectProvider" />  
  
    -   <see cref="T:System.Xaml.IXamlNameResolver" />  
  
    -   <see cref="T:System.Xaml.IXamlNamespaceResolver" /><span data-ttu-id="352e9-138">Возможно, реализации <see cref="M:System.Windows.Markup.MarkupExtension.ProvideValue(System.IServiceProvider)" /> можно игнорировать <paramref name="serviceProvider" /> параметра.</span><span class="sxs-lookup"><span data-stu-id="352e9-138">Potentially, implementations of <see cref="M:System.Windows.Markup.MarkupExtension.ProvideValue(System.IServiceProvider)" /> can ignore the <paramref name="serviceProvider" /> parameter.</span></span><span data-ttu-id="352e9-139">Это применяется для некоторых основных сценариев, где контекст не вообще не требуется для возврата значения.</span><span class="sxs-lookup"><span data-stu-id="352e9-139">This is viable for some basic scenarios, where no context at all is required for returning a value.</span></span><span data-ttu-id="352e9-140">В типичных сценариях использования служб XAML .NET Framework и реализовано объектов XAML предоставляет модули записи поставщика услуг всем методам преобразователя значений, которые вызываются во время XAML обработки.</span><span class="sxs-lookup"><span data-stu-id="352e9-140">In typical usage, the .NET Framework XAML Services and the implemented XAML object writers will provide a service provider to all value converter methods that are invoked during XAML processing.</span></span><span data-ttu-id="352e9-141">Однако для надежности, необходимо предоставить пути кода для значений null для поставщика услуг, так и для запрошенных служб.</span><span class="sxs-lookup"><span data-stu-id="352e9-141">However, for robustness, you should provide code paths for null values both for the service provider itself and for any requested service.</span></span><span data-ttu-id="352e9-142">Значения NULL применяется в случае использования расширения разметки применяется в случае когда обычной службы поддержки, обеспечиваемой инфраструктуру процессора XAML не доступен.</span><span class="sxs-lookup"><span data-stu-id="352e9-142">Null values might occur if your markup extension is applied in a circumstance where the typical service support provided by a XAML processor infrastructure is not available.</span></span><span data-ttu-id="352e9-143">Дополнительные сведения о доступных служб из контекста поставщика службы XAML и способы их использования см. в разделе [преобразователи типов или расширения разметки для XAML](~/docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="352e9-143">For more information on available services from the XAML service provider context and how to use them, see [Type Converters and Markup Extensions for XAML](~/docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md).</span></span><span data-ttu-id="352e9-144">Реализации, которым требуется определенная служба доступна для создания полезной <see cref="M:System.Windows.Markup.MarkupExtension.ProvideValue(System.IServiceProvider)" /> ожидаемый результат могут вызывать исключения, если эта служба недоступна.</span><span class="sxs-lookup"><span data-stu-id="352e9-144">Implementations that require a certain service to be available in order to produce a useful <see cref="M:System.Windows.Markup.MarkupExtension.ProvideValue(System.IServiceProvider)" /> result are expected to throw exceptions if that service is not available.</span></span><span data-ttu-id="352e9-145">Рекомендуемые исключение, является <see cref="T:System.InvalidOperationException" />.</span><span class="sxs-lookup"><span data-stu-id="352e9-145">The recommended exception to throw is <see cref="T:System.InvalidOperationException" />.</span></span><span data-ttu-id="352e9-146">Реализация также могут вызывать исключения, если один из аргументов, необходимые для пользовательского расширения разметки для предоставления имеет значение null, является недопустимым для типа данных или не содержит значение, обработки способен расширения разметки.</span><span class="sxs-lookup"><span data-stu-id="352e9-146">The implementation may also throw exceptions if one of the arguments that the custom markup extension needs in order to provide a value is null, is invalid for its data type, or does not contain a value that the markup extension is capable of processing.</span></span><span data-ttu-id="352e9-147">Рекомендуемые исключение, является <see cref="T:System.InvalidOperationException" />.</span><span class="sxs-lookup"><span data-stu-id="352e9-147">The recommended exception to throw is <see cref="T:System.InvalidOperationException" />.</span></span></para>
        </block>
        <altmember cref="T:System.Windows.Markup.IProvideValueTarget" />
        <altmember cref="T:System.Windows.Markup.IXamlTypeResolver" />
      </Docs>
    </Member>
  </Members>
</Type>