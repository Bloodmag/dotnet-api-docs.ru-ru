<Namespace Name="System.Xml">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="387ead456ca712020d84be7033df275f1b19be0c" />
    <Meta Name="ms.sourcegitcommit" Value="cbcba80f998e27b87425ad54726bdb684fb3a932" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="ru-RU" />
    <Meta Name="ms.lasthandoff" Value="09/04/2018" />
    <Meta Name="ms.locfileid" Value="43580255" />
  </Metadata>
  <Docs>
    <summary>
      <span data-ttu-id="50ebf-101">Пространство имен <see cref="N:System.Xml" /> предоставляет основанную на стандартах поддержку обработки XML.</span>
      <span class="sxs-lookup">
        <span data-stu-id="50ebf-101">The <see cref="N:System.Xml" /> namespace provides standards-based support for processing XML.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
<a name="std"></a>   
## <a name="supported-standards"></a><span data-ttu-id="50ebf-102">Поддерживаемые стандарты</span><span class="sxs-lookup"><span data-stu-id="50ebf-102">Supported standards</span></span>  
 <span data-ttu-id="50ebf-103"><xref:System.Xml> Пространство имен поддерживает эти стандарты:</span><span class="sxs-lookup"><span data-stu-id="50ebf-103">The <xref:System.Xml> namespace supports these standards:</span></span>  
  
-   <span data-ttu-id="50ebf-104">XML 1.0, включая поддержку DTD: [http://www.w3.org/TR/2006/REC-xml-20060816/](http://www.w3.org/TR/2006/REC-xml-20060816/)</span><span class="sxs-lookup"><span data-stu-id="50ebf-104">XML 1.0, including DTD support: [http://www.w3.org/TR/2006/REC-xml-20060816/](http://www.w3.org/TR/2006/REC-xml-20060816/)</span></span>  
  
-   <span data-ttu-id="50ebf-105">Пространства имен XML, оба потока уровня и DOM: [http://www.w3.org/TR/REC-xml-names/](http://www.w3.org/TR/REC-xml-names/)</span><span class="sxs-lookup"><span data-stu-id="50ebf-105">XML namespaces, both stream-level and DOM: [http://www.w3.org/TR/REC-xml-names/](http://www.w3.org/TR/REC-xml-names/)</span></span>  
  
-   <span data-ttu-id="50ebf-106">XML-схем: [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)</span><span class="sxs-lookup"><span data-stu-id="50ebf-106">XML schemas: [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)</span></span>  
  
-   <span data-ttu-id="50ebf-107">Выражения XPath. [http://www.w3.org/TR/xpath](http://www.w3.org/TR/xpath)</span><span class="sxs-lookup"><span data-stu-id="50ebf-107">XPath expressions: [http://www.w3.org/TR/xpath](http://www.w3.org/TR/xpath)</span></span>  
  
-   <span data-ttu-id="50ebf-108">XSLT-преобразования: [http://www.w3.org/TR/xslt](http://www.w3.org/TR/xslt)</span><span class="sxs-lookup"><span data-stu-id="50ebf-108">XSLT transformations: [http://www.w3.org/TR/xslt](http://www.w3.org/TR/xslt)</span></span>  
  
-   <span data-ttu-id="50ebf-109">DOM базового уровня 1: [http://www.w3.org/TR/REC-DOM-Level-1/](http://www.w3.org/TR/REC-DOM-Level-1/)</span><span class="sxs-lookup"><span data-stu-id="50ebf-109">DOM Level 1 Core: [http://www.w3.org/TR/REC-DOM-Level-1/](http://www.w3.org/TR/REC-DOM-Level-1/)</span></span>  
  
-   <span data-ttu-id="50ebf-110">DOM базового уровня 2: [http://www.w3.org/TR/DOM-Level-2/](http://www.w3.org/TR/DOM-Level-2/)</span><span class="sxs-lookup"><span data-stu-id="50ebf-110">DOM Level 2 Core: [http://www.w3.org/TR/DOM-Level-2/](http://www.w3.org/TR/DOM-Level-2/)</span></span>  
  
 <span data-ttu-id="50ebf-111">См. в разделе [отличия от спецификации W3C](#diff) вариантов, в которых классы XML отличаются от рекомендаций W3C.</span><span class="sxs-lookup"><span data-stu-id="50ebf-111">See the section [Differences from the W3C specs](#diff) for two cases in which the XML classes differ from the W3C recommendations.</span></span>  
  
<a name="related"></a>   
## <a name="related-namespaces"></a><span data-ttu-id="50ebf-112">Связанные пространства имен</span><span class="sxs-lookup"><span data-stu-id="50ebf-112">Related namespaces</span></span>  
 <span data-ttu-id="50ebf-113">.NET Framework также предоставляет другие пространства имен для операций, связанных с XML.</span><span class="sxs-lookup"><span data-stu-id="50ebf-113">The .NET Framework also provides other namespaces for XML-related operations.</span></span> <span data-ttu-id="50ebf-114">Список, описания и ссылки, см. в разделе [пространства имен System.Xml](http://msdn.microsoft.com/library/gg145036.aspx) веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="50ebf-114">For a list, descriptions, and links, see the [System.Xml Namespaces](http://msdn.microsoft.com/library/gg145036.aspx) webpage.</span></span>  
  
<a name="async"></a>   
## <a name="processing-xml-asynchronously"></a><span data-ttu-id="50ebf-115">Асинхронная обработка XML</span><span class="sxs-lookup"><span data-stu-id="50ebf-115">Processing XML asynchronously</span></span>  
 <span data-ttu-id="50ebf-116"><xref:System.Xml.XmlReader?displayProperty=nameWithType> И <xref:System.Xml.XmlWriter?displayProperty=nameWithType> классы включают несколько асинхронных методов, основанных на.</span><span class="sxs-lookup"><span data-stu-id="50ebf-116">The <xref:System.Xml.XmlReader?displayProperty=nameWithType> and <xref:System.Xml.XmlWriter?displayProperty=nameWithType> classes include a number of asynchronous methods that are based on the .</span></span> <span data-ttu-id="50ebf-117">Эти методы можно определить по строке «Async» в конце их имена.</span><span class="sxs-lookup"><span data-stu-id="50ebf-117">These methods can be identified by the string "Async" at the end of their names.</span></span> <span data-ttu-id="50ebf-118">С помощью этих методов можно написать асинхронный код, которая похожа на синхронный код, и можно перенести существующий код синхронного в асинхронный код легко.</span><span class="sxs-lookup"><span data-stu-id="50ebf-118">With these methods, you can write asynchronous code that's similar to your synchronous code, and you can migrate your existing synchronous code to asynchronous code easily.</span></span>  
  
-   <span data-ttu-id="50ebf-119">Использовать асинхронные методы в приложениях при наличии потока задержек в сети.</span><span class="sxs-lookup"><span data-stu-id="50ebf-119">Use the asynchronous methods in apps where there is significant network stream latency.</span></span> <span data-ttu-id="50ebf-120">Избегайте использования асинхронных интерфейсов API для потока памяти или операций чтения и записи потока в локальный файл.</span><span class="sxs-lookup"><span data-stu-id="50ebf-120">Avoid using the asynchronous APIs for memory stream or local file stream read/write operations.</span></span> <span data-ttu-id="50ebf-121">Входной поток, <xref:System.Xml.XmlTextReader>, и <xref:System.Xml.XmlTextWriter> должен поддерживать также асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="50ebf-121">The input stream, <xref:System.Xml.XmlTextReader>, and <xref:System.Xml.XmlTextWriter> should support asynchronous operations as well.</span></span> <span data-ttu-id="50ebf-122">В противном случае потоки будут по-прежнему блокируется операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="50ebf-122">Otherwise, threads will still be blocked by I/O operations.</span></span>  
  
-   <span data-ttu-id="50ebf-123">Мы не рекомендуем смешивание синхронные и асинхронные вызовы, поскольку возможно, пропущено `await` ключевое слово или использования синхронных API, где необходима асинхронной.</span><span class="sxs-lookup"><span data-stu-id="50ebf-123">We don't recommend mixing synchronous and asynchronous function calls, because you might forget to use the `await` keyword or use a synchronous API where an asynchronous one is necessary.</span></span>  
  
-   <span data-ttu-id="50ebf-124">Не устанавливайте <xref:System.Xml.XmlReaderSettings.Async%2A?displayProperty=nameWithType> или <xref:System.Xml.XmlWriterSettings.Async%2A?displayProperty=nameWithType> флаг `true` Если вы не собираетесь использовать асинхронный метод.</span><span class="sxs-lookup"><span data-stu-id="50ebf-124">Do not set the <xref:System.Xml.XmlReaderSettings.Async%2A?displayProperty=nameWithType> or <xref:System.Xml.XmlWriterSettings.Async%2A?displayProperty=nameWithType> flag to `true` if you don't intend to use an asynchronous method.</span></span>  
  
-   <span data-ttu-id="50ebf-125">Если вы забыли указать `await` ключевое слово при вызове асинхронного метода, результаты являются недетерминистическими: ожидалось результат или исключение может появиться.</span><span class="sxs-lookup"><span data-stu-id="50ebf-125">If you forget to specify the `await` keyword when you call an asynchronous method, the results are non-deterministic: You might receive the result you expected or an exception.</span></span>  
  
-   <span data-ttu-id="50ebf-126">Когда <xref:System.Xml.XmlReader> объекта считывает большой текстовый узел, он может кэшировать только частичное текстовое значение и вернуть текстовый узел, поэтому получение <xref:System.Xml.XmlReader.Value%2A?displayProperty=nameWithType> свойство может быть заблокирован при выполнении операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="50ebf-126">When an <xref:System.Xml.XmlReader> object is reading a large text node, it might cache only a partial text value and return the text node, so retrieving the <xref:System.Xml.XmlReader.Value%2A?displayProperty=nameWithType> property might be blocked by an I/O operation.</span></span> <span data-ttu-id="50ebf-127">Используйте <xref:System.Xml.XmlReader.GetValueAsync%2A?displayProperty=nameWithType> метод, чтобы получить текстовое значение в асинхронном режиме, либо используйте <xref:System.Xml.XmlReader.ReadValueChunkAsync%2A?displayProperty=nameWithType> метод для чтения большого текстового блока в блоки.</span><span class="sxs-lookup"><span data-stu-id="50ebf-127">Use the <xref:System.Xml.XmlReader.GetValueAsync%2A?displayProperty=nameWithType> method to get the text value in asynchronous mode, or use the <xref:System.Xml.XmlReader.ReadValueChunkAsync%2A?displayProperty=nameWithType> method to read a large text block in chunks.</span></span>  
  
-   <span data-ttu-id="50ebf-128">При использовании <xref:System.Xml.XmlWriter> , вызовите <xref:System.Xml.XmlWriter.FlushAsync%2A?displayProperty=nameWithType> метод перед вызовом <xref:System.Xml.XmlWriter.Close%2A?displayProperty=nameWithType> для предотвращения блокировки операцию ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="50ebf-128">When you use an <xref:System.Xml.XmlWriter> object, call the <xref:System.Xml.XmlWriter.FlushAsync%2A?displayProperty=nameWithType> method before calling <xref:System.Xml.XmlWriter.Close%2A?displayProperty=nameWithType> to avoid blocking an I/O operation.</span></span>  
  
<a name="diff"></a>   
## <a name="differences-from-the-w3c-specs"></a><span data-ttu-id="50ebf-129">Отличия от спецификации W3C</span><span class="sxs-lookup"><span data-stu-id="50ebf-129">Differences from the W3C specs</span></span>  
 <span data-ttu-id="50ebf-130">В двух случаях, которые включают ограничения компонентов схемы группы моделей <xref:System.Xml> пространство имен отличается от рекомендаций W3C.</span><span class="sxs-lookup"><span data-stu-id="50ebf-130">In two cases that involve constraints on model group schema components, the <xref:System.Xml> namespace differs from the W3C recommendations.</span></span>  
  
 <span data-ttu-id="50ebf-131">**Согласованность в объявления элементов:**</span><span class="sxs-lookup"><span data-stu-id="50ebf-131">**Consistency in element declarations:**</span></span>  
  
 <span data-ttu-id="50ebf-132">В некоторых случаях, когда используются группы подстановки <xref:System.Xml> реализации не удовлетворяет ограничению «схема компонентов ограничение: объявления элементов согласованы,» описанный в [ограничения компонентов схемы группы моделей ](http://go.microsoft.com/fwlink/?LinkId=137029) разделе спецификации W3C.</span><span class="sxs-lookup"><span data-stu-id="50ebf-132">In some cases, when substitution groups are used, the <xref:System.Xml> implementation does not satisfy the "Schema Component Constraint: Element Declarations Consistent," which is described in the [Constraints on Model Group Schema Components](http://go.microsoft.com/fwlink/?LinkId=137029) section of the W3C spec.</span></span>  
  
 <span data-ttu-id="50ebf-133">Например следующая схема включает элементы, которые имеют одинаковые имена, но используются различные типы в той же модели содержимого, а группы подстановки.</span><span class="sxs-lookup"><span data-stu-id="50ebf-133">For example, the following schema includes elements that have the same name but different types in the same content model, and substitution groups are used.</span></span> <span data-ttu-id="50ebf-134">Это может вызвать ошибку, но <xref:System.Xml> компилирует и проверяет схему без ошибок.</span><span class="sxs-lookup"><span data-stu-id="50ebf-134">This should cause an error, but <xref:System.Xml> compiles and validates the schema without errors.</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8" ?>   
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">  
  
   <xs:element name="e1" type="t1"/>  
   <xs:complexType name="t1"/>  
  
   <xs:element name="e2" type="t2" substitutionGroup="e1"/>  
      <xs:complexType name="t2">  
         <xs:complexContent>  
            <xs:extension base="t1">  
         </xs:extension>  
      </xs:complexContent>  
   </xs:complexType>  
  
   <xs:complexType name="t3">  
      <xs:sequence>  
         <xs:element ref="e1"/>  
         <xs:element name="e2" type="xs:int"/>  
      </xs:sequence>  
   </xs:complexType>  
</xs:schema>  
```  
  
 <span data-ttu-id="50ebf-135">В этой схеме тип `t3` содержит последовательность элементов.</span><span class="sxs-lookup"><span data-stu-id="50ebf-135">In this schema, type `t3` contains a sequence of elements.</span></span> <span data-ttu-id="50ebf-136">По причине подстановки ссылка из последовательности на элемент `e1` может привести к образованию либо элемента `e1` типа `t1`, либо элемента `e2` типа `t2`.</span><span class="sxs-lookup"><span data-stu-id="50ebf-136">Because of the substitution, the reference to element `e1` from the sequence can result either in element `e1` of type `t1` or in element `e2` of type `t2`.</span></span> <span data-ttu-id="50ebf-137">В последнем случае приведет к из двух последовательных `e2` элементов, где он типа `t2` , а другой — типа `xs:int`.</span><span class="sxs-lookup"><span data-stu-id="50ebf-137">The latter case would result in a sequence of two `e2` elements, where one is of type `t2` and the other is of type `xs:int`.</span></span>  
  
 <span data-ttu-id="50ebf-138">**Однозначное соответствие примитивов:**</span><span class="sxs-lookup"><span data-stu-id="50ebf-138">**Unique particle attribution:**</span></span>  
  
 <span data-ttu-id="50ebf-139">При следующих условиях <xref:System.Xml> реализации не удовлетворяет ограничению «схема компонентов ограничение: однозначное соответствие примитивов,» описанный в [ограничения компонентов схемы группы моделей](http://go.microsoft.com/fwlink/?LinkId=137029) раздел спецификации W3C.</span><span class="sxs-lookup"><span data-stu-id="50ebf-139">Under the following conditions, the <xref:System.Xml> implementation does not satisfy the "Schema Component Constraint: Unique Particle Attribution," which is described in the [Constraints on Model Group Schema Components](http://go.microsoft.com/fwlink/?LinkId=137029) section of the W3C spec.</span></span>  
  
-   <span data-ttu-id="50ebf-140">Один из элементов в группе ссылается на другой элемент.</span><span class="sxs-lookup"><span data-stu-id="50ebf-140">One of the elements in the group references another element.</span></span>  
  
-   <span data-ttu-id="50ebf-141">Элемент, на который указывает ссылка, является головным элементом группы подстановки.</span><span class="sxs-lookup"><span data-stu-id="50ebf-141">The referenced element is a head element of a substitution group.</span></span>  
  
-   <span data-ttu-id="50ebf-142">Группа подстановки содержит элемент, имеющий то же имя, что один из элементов в группе.</span><span class="sxs-lookup"><span data-stu-id="50ebf-142">The substitution group contains an element that has the same name as one of the elements in the group.</span></span>  
  
-   <span data-ttu-id="50ebf-143">Кратности элемента, который ссылается на головной элемент группы подстановки и элемент с тем же именем, как элемент группы подстановки не зафиксировано (minOccurs < maxOccurs).</span><span class="sxs-lookup"><span data-stu-id="50ebf-143">The cardinality of the element that references the substitution group head element and the element with the same name as a substitution group element is not fixed (minOccurs < maxOccurs).</span></span>  
  
-   <span data-ttu-id="50ebf-144">Определение элемента, который ссылается на группу подстановки, приведено раньше определения элемента с тем же именем, как элемент группы подстановки.</span><span class="sxs-lookup"><span data-stu-id="50ebf-144">The definition of the element that references the substitution group precedes the definition of the element with the same name as a substitution group element.</span></span>  
  
 <span data-ttu-id="50ebf-145">Например, в нижеприведенной схеме модель содержимого неоднозначна и может привести к возникновению ошибки компиляции, но <xref:System.Xml> компилирует схему без ошибок.</span><span class="sxs-lookup"><span data-stu-id="50ebf-145">For example, in the schema below the content model is ambiguous and should cause a compilation error, but <xref:System.Xml> compiles the schema without errors.</span></span>  
  
```xml  
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">  
  
  <xs:element name="e1" type="xs:int"/>  
  <xs:element name="e2" type="xs:int" substitutionGroup="e1"/>  
  
  <xs:complexType name="t3">  
    <xs:sequence>  
      <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
      <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
    </xs:sequence>  
  </xs:complexType>  
  
  <xs:element name="e3" type="t3"/>  
</xs:schema>  
```  
  
 <span data-ttu-id="50ebf-146">При попытке проверить следующий XML по вышеприведенной схеме проверка завершится со следующим сообщением: «элемент «e3» содержит недопустимый дочерний элемент «e2»». и <xref:System.Xml.Schema.XmlSchemaValidationException> будет создано исключение.</span><span class="sxs-lookup"><span data-stu-id="50ebf-146">If you try to validate the following XML against the schema above, the validation will fail with the following message: "The element 'e3' has invalid child element 'e2'." and an <xref:System.Xml.Schema.XmlSchemaValidationException> exception will be thrown.</span></span>  
  
```xml  
<e3>  
  <e2>1</e2>  
  <e2>2</e2>  
</e3>  
```  
  
 <span data-ttu-id="50ebf-147">Чтобы обойти эту проблему, можно поменяйте местами объявления элементов из документа XSD.</span><span class="sxs-lookup"><span data-stu-id="50ebf-147">To work around this problem, you can swap element declarations in the XSD document.</span></span> <span data-ttu-id="50ebf-148">Пример:</span><span class="sxs-lookup"><span data-stu-id="50ebf-148">For example:</span></span>  
  
```xml  
<xs:sequence>  
  <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
  <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
</xs:sequence>  
```  
  
 <span data-ttu-id="50ebf-149">становится</span><span class="sxs-lookup"><span data-stu-id="50ebf-149">becomes this:</span></span>  
  
```xml  
<xs:sequence>  
  <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
  <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
</xs:sequence>  
```  
  
 <span data-ttu-id="50ebf-150">Вот еще один пример той же проблемы:</span><span class="sxs-lookup"><span data-stu-id="50ebf-150">Here's another example of the same issue:</span></span>  
  
```xml  
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">  
   <xs:element name="e1" type="xs:string"/>  
   <xs:element name="e2" type="xs:string" substitutionGroup="e1"/>  
  
   <xs:complexType name="t3">  
      <xs:sequence>  
         <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
         <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
      </xs:sequence>  
   </xs:complexType>  
   <xs:element name="e3" type="t3"/>  
</xs:schema>  
```  
  
 <span data-ttu-id="50ebf-151">При попытке проверить следующий XML по вышеприведенной схеме проверка завершится со следующим исключением: «необработанное исключение: System.Xml.Schema.XmlSchemaValidationException: элемент «e2» el недопустим — значение «abc» недопустимо в соответствии с его тип данных "http://www.w3.org/2001/XMLSchema:int"-строка «abc» не является допустимым значением Int32.»</span><span class="sxs-lookup"><span data-stu-id="50ebf-151">If you try to validate the following XML against the schema above, the validation will fail with the following exception: "Unhandled Exception: System.Xml.Schema.XmlSchemaValidationException: The 'e2' el element is invalid - The value 'abc' is invalid according to its datatype 'http://www.w3.org/2001/XMLSchema:int' - The string 'abc' is not a valid Int32 value."</span></span>
  
```xml  
<e3><e2>abc</e2></e3>  
```  
  
<a name="security"></a>   
## <a name="security-considerations"></a><span data-ttu-id="50ebf-152">Замечания по безопасности</span><span class="sxs-lookup"><span data-stu-id="50ebf-152">Security considerations</span></span>  
 <span data-ttu-id="50ebf-153">Типы и члены в <xref:System.Xml> зависят от пространства имен [систему безопасности .NET](~/docs/standard/security/index.md).</span><span class="sxs-lookup"><span data-stu-id="50ebf-153">The types and members in the <xref:System.Xml> namespace rely on the [.NET security system](~/docs/standard/security/index.md).</span></span> <span data-ttu-id="50ebf-154">В следующих разделах рассматриваются вопросы безопасности, относящиеся к XML-технологиями.</span><span class="sxs-lookup"><span data-stu-id="50ebf-154">The following sections discuss security issues that are specific to XML technologies.</span></span>
  
 <span data-ttu-id="50ebf-155">Также Обратите внимание, что при использовании <xref:System.Xml> типов и членов, если XML содержит данные, имеющие могут повлиять на конфиденциальность, необходимо реализовать приложение способом, оберегающим конфиденциальность конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="50ebf-155">Also note that when you use the <xref:System.Xml> types and members, if the XML contains data that has potential privacy implications, you need to implement your app in a way that respects your end users' privacy.</span></span>
  
 <span data-ttu-id="50ebf-156">**Внешний доступ**</span><span class="sxs-lookup"><span data-stu-id="50ebf-156">**External access**</span></span>  
  
 <span data-ttu-id="50ebf-157">Несколько XML-технологий позволяют получать в ходе обработки другие документы.</span><span class="sxs-lookup"><span data-stu-id="50ebf-157">Several XML technologies have the ability to retrieve other documents during processing.</span></span> <span data-ttu-id="50ebf-158">Например, определение типа документа (DTD) может находиться в документе, для которого выполняется синтаксический анализ.</span><span class="sxs-lookup"><span data-stu-id="50ebf-158">For example, a document type definition (DTD) can reside in the document being parsed.</span></span> <span data-ttu-id="50ebf-159">DTD может также находиться во внешнем документе, на который ссылается анализируемый документ.</span><span class="sxs-lookup"><span data-stu-id="50ebf-159">The DTD can also live in an external document that is referenced by the document being parsed.</span></span> <span data-ttu-id="50ebf-160">Язык XSD и технологии XSLT также позволяют включать сведения из других файлов.</span><span class="sxs-lookup"><span data-stu-id="50ebf-160">The XML Schema definition language (XSD) and XSLT technologies also have the ability to include information from other files.</span></span> <span data-ttu-id="50ebf-161">Эти внешние ресурсы могут быть связаны некоторые проблемы безопасности.</span><span class="sxs-lookup"><span data-stu-id="50ebf-161">These external resources can present some security concerns.</span></span> <span data-ttu-id="50ebf-162">Например вы захотите убедиться, что приложение извлекает файлы только из надежных сайтов и что файл он извлекает не содержит вредоносных данных.</span><span class="sxs-lookup"><span data-stu-id="50ebf-162">For example, you'll want to ensure that your app retrieves files only from trusted sites, and that the file it retrieves doesn't contain malicious data.</span></span>  
  
 <span data-ttu-id="50ebf-163"><xref:System.Xml.XmlUrlResolver> Класс используется для загрузки XML-документов, а также для разрешения внешних ресурсов, таких как сущности, DTD или схемы и импорта или включения директив.</span><span class="sxs-lookup"><span data-stu-id="50ebf-163">The <xref:System.Xml.XmlUrlResolver> class is used to load XML documents and to resolve external resources such as entities, DTDs, or schemas, and import or include directives.</span></span>  
  
 <span data-ttu-id="50ebf-164">Можно переопределить этот класс и укажите <xref:System.Xml.XmlResolver> объект для использования.</span><span class="sxs-lookup"><span data-stu-id="50ebf-164">You can override this class and specify the <xref:System.Xml.XmlResolver> object to use.</span></span> <span data-ttu-id="50ebf-165">Использовать класс <xref:System.Xml.XmlSecureResolver> рекомендуется, если вам необходимо открыть ресурс, которым вы не управляете или к которому нет доверия.</span><span class="sxs-lookup"><span data-stu-id="50ebf-165">Use the <xref:System.Xml.XmlSecureResolver> class if you need to open a resource that you do not control, or that is untrusted.</span></span> <span data-ttu-id="50ebf-166">Класс <xref:System.Xml.XmlSecureResolver> упаковывает объект <xref:System.Xml.XmlResolver> и позволяет ограничить ресурсы, доступные для базового объекта <xref:System.Xml.XmlResolver>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-166">The <xref:System.Xml.XmlSecureResolver> wraps an <xref:System.Xml.XmlResolver> and allows you to restrict the resources that the underlying <xref:System.Xml.XmlResolver> has access to.</span></span>  
  
 <span data-ttu-id="50ebf-167">**Отказ в обслуживании**</span><span class="sxs-lookup"><span data-stu-id="50ebf-167">**Denial of service**</span></span>  
  
 <span data-ttu-id="50ebf-168">Следующие сценарии считаются менее уязвимыми для атак типа «отказ в обслуживании», так как классы <xref:System.Xml> обеспечивают средства защиты от таких атак.</span><span class="sxs-lookup"><span data-stu-id="50ebf-168">The following scenarios are considered to be less vulnerable to denial of service attacks because the <xref:System.Xml> classes provide a means of protection from such attacks.</span></span>  
  
-   <span data-ttu-id="50ebf-169">Синтаксический анализ текстовых XML-данных.</span><span class="sxs-lookup"><span data-stu-id="50ebf-169">Parsing text XML data.</span></span>  
  
-   <span data-ttu-id="50ebf-170">Синтаксический анализ двоичных XML-данных, если двоичных XML-данных был создан в Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="50ebf-170">Parsing binary XML data if the binary XML data was generated by Microsoft SQL Server.</span></span>  
  
-   <span data-ttu-id="50ebf-171">Запись XML-документов и фрагментов из источников данных в файловую систему, потоки, <xref:System.IO.TextWriter> или <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-171">Writing XML documents and fragments from data sources to the file system, streams, a <xref:System.IO.TextWriter>, or a <xref:System.Text.StringBuilder>.</span></span>  
  
-   <span data-ttu-id="50ebf-172">Загрузка документов в объект DOM, если используется объект <xref:System.Xml.XmlReader>, а свойство <xref:System.Xml.XmlReaderSettings.DtdProcessing%2A?displayProperty=nameWithType> имеет значение <xref:System.Xml.DtdProcessing.Prohibit?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-172">Loading documents into the Document Object Model (DOM) object if you are using an <xref:System.Xml.XmlReader> object and <xref:System.Xml.XmlReaderSettings.DtdProcessing%2A?displayProperty=nameWithType> set to <xref:System.Xml.DtdProcessing.Prohibit?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="50ebf-173">Навигация по объекту DOM.</span><span class="sxs-lookup"><span data-stu-id="50ebf-173">Navigating the DOM object.</span></span>  
  
 <span data-ttu-id="50ebf-174">Приведенные ниже сценарии использовать не рекомендуются, если есть угроза атак типа «отказ в обслуживании» или при работе в ненадежной среде.</span><span class="sxs-lookup"><span data-stu-id="50ebf-174">The following scenarios are not recommended if you are concerned about denial of service attacks, or if you are working in an untrusted environment.</span></span>  
  
-   <span data-ttu-id="50ebf-175">Обработка DTD.</span><span class="sxs-lookup"><span data-stu-id="50ebf-175">DTD processing.</span></span>  
  
-   <span data-ttu-id="50ebf-176">Обработка схем.</span><span class="sxs-lookup"><span data-stu-id="50ebf-176">Schema processing.</span></span> <span data-ttu-id="50ebf-177">Сюда относится добавление в коллекцию схем схемы без доверия, компиляция схемы без доверия и проверка с использованием схемы без доверия.</span><span class="sxs-lookup"><span data-stu-id="50ebf-177">This includes adding an untrusted schema to the schema collection, compiling an untrusted schema, and validating by using an untrusted schema.</span></span>  
  
-   <span data-ttu-id="50ebf-178">Обработка XSLT.</span><span class="sxs-lookup"><span data-stu-id="50ebf-178">XSLT processing.</span></span>  
  
-   <span data-ttu-id="50ebf-179">Синтаксический анализ произвольного потока предоставленных пользователем двоичных XML-данных.</span><span class="sxs-lookup"><span data-stu-id="50ebf-179">Parsing any arbitrary stream of user supplied binary XML data.</span></span>  
  
-   <span data-ttu-id="50ebf-180">DOM-операции, например запросы, изменение, перемещение поддеревьев между документами и сохранение объектов DOM.</span><span class="sxs-lookup"><span data-stu-id="50ebf-180">DOM operations such as querying, editing, moving sub-trees between documents, and saving DOM objects.</span></span>  
  
 <span data-ttu-id="50ebf-181">Если вы беспокоитесь о отказ в обслуживании проблемы или вы работаете с ненадежными источниками, не включайте обработку DTD.</span><span class="sxs-lookup"><span data-stu-id="50ebf-181">If you are concerned about denial of service issues or if you are dealing with untrusted sources, do not enable DTD processing.</span></span> <span data-ttu-id="50ebf-182">Эта функция отключена по умолчанию на <xref:System.Xml.XmlReader> объекты, которые <xref:System.Xml.XmlReader.Create%2A?displayProperty=nameWithType> методом.</span><span class="sxs-lookup"><span data-stu-id="50ebf-182">This is disabled by default on <xref:System.Xml.XmlReader> objects that the <xref:System.Xml.XmlReader.Create%2A?displayProperty=nameWithType> method creates.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="50ebf-183">Класс <xref:System.Xml.XmlTextReader> по умолчанию разрешает обработку DTD.</span><span class="sxs-lookup"><span data-stu-id="50ebf-183">The <xref:System.Xml.XmlTextReader> allows DTD processing by default.</span></span> <span data-ttu-id="50ebf-184">Чтобы отключить эту функцию, воспользуйтесь свойством <xref:System.Xml.XmlTextReader.DtdProcessing%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-184">Use the <xref:System.Xml.XmlTextReader.DtdProcessing%2A?displayProperty=nameWithType> property to disable this feature.</span></span>  
  
 <span data-ttu-id="50ebf-185">Если обработка DTD включена, можно использовать <xref:System.Xml.XmlSecureResolver> класс для ограничения ресурсов, <xref:System.Xml.XmlReader> доступны.</span><span class="sxs-lookup"><span data-stu-id="50ebf-185">If you have DTD processing enabled, you can use the <xref:System.Xml.XmlSecureResolver> class to restrict the resources that the <xref:System.Xml.XmlReader> can access.</span></span> <span data-ttu-id="50ebf-186">Можно также разрабатывать приложения, чтобы обработка XML — это память, и время, выделяемое.</span><span class="sxs-lookup"><span data-stu-id="50ebf-186">You can also design your app so that the XML processing is memory and time constrained.</span></span> <span data-ttu-id="50ebf-187">Например можно настроить пределы времени ожидания в приложении ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="50ebf-187">For example, you can configure timeout limits in your ASP.NET app.</span></span>  
  
 <span data-ttu-id="50ebf-188">**Рекомендации по обработке**</span><span class="sxs-lookup"><span data-stu-id="50ebf-188">**Processing considerations**</span></span>  
  
 <span data-ttu-id="50ebf-189">XML-документы могут содержать ссылки на другие файлы, поэтому трудно определить, сколько вычислительных ресурсов потребуется для синтаксического анализа XML-документа.</span><span class="sxs-lookup"><span data-stu-id="50ebf-189">Because XML documents can include references to other files, it is difficult to determine how much processing power is required to parse an XML document.</span></span> <span data-ttu-id="50ebf-190">Например, XML-документы могут содержать DTD.</span><span class="sxs-lookup"><span data-stu-id="50ebf-190">For example, XML documents can include a DTD.</span></span> <span data-ttu-id="50ebf-191">Если DTD содержит сущности или сложные модели содержимого, то для синтаксического анализа документа может потребоваться слишком много времени.</span><span class="sxs-lookup"><span data-stu-id="50ebf-191">If the DTD contains nested entities or complex content models, it could take an excessive amount of time to parse the document.</span></span>  
  
 <span data-ttu-id="50ebf-192">При использовании <xref:System.Xml.XmlReader> можно ограничить размер документа, который может быть подвергнут синтаксическому анализу, задав свойство <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-192">When using <xref:System.Xml.XmlReader>, you can limit the size of the document that can be parsed by setting the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="50ebf-193">Можно ограничить число символов, появляющихся в результате раскрытия сущностей, задав свойство <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-193">You can limit the number of characters that result from expanding entities by setting the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="50ebf-194">Примеры настройки этих свойств см. в соответствующих разделах справки.</span><span class="sxs-lookup"><span data-stu-id="50ebf-194">See the appropriate reference topics for examples of setting these properties.</span></span>  
  
 <span data-ttu-id="50ebf-195">Технологии XSD и XSLT имеют дополнительные возможности, которые могут влиять на производительность при обработке.</span><span class="sxs-lookup"><span data-stu-id="50ebf-195">The XSD and XSLT technologies have additional capabilities that can affect processing performance.</span></span> <span data-ttu-id="50ebf-196">Например, можно построить схему XML, для обработки которой даже при сравнительно небольшом размере документа потребуется значительное время.</span><span class="sxs-lookup"><span data-stu-id="50ebf-196">For example, it is possible to construct an XML schema that requires a substantial amount of time to process when evaluated over a relatively small document.</span></span> <span data-ttu-id="50ebf-197">Кроме того, можно внедрять блоки скриптов в таблицу стилей XSLT.</span><span class="sxs-lookup"><span data-stu-id="50ebf-197">It is also possible to embed script blocks within an XSLT style sheet.</span></span> <span data-ttu-id="50ebf-198">В обоих случаях существует потенциальная угроза безопасности к приложению.</span><span class="sxs-lookup"><span data-stu-id="50ebf-198">Both cases pose a potential security threat to your app.</span></span>  
  
 <span data-ttu-id="50ebf-199">При создании приложения, использующего <xref:System.Xml.Xsl.XslCompiledTransform> класса, следует иметь в виду следующие элементы и их последствиях:</span><span class="sxs-lookup"><span data-stu-id="50ebf-199">When creating an app that uses the <xref:System.Xml.Xsl.XslCompiledTransform> class, you should be aware of the following items and their implications:</span></span>  
  
-   <span data-ttu-id="50ebf-200">Скрипты XSLT отключены по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="50ebf-200">XSLT scripting is disabled by default.</span></span> <span data-ttu-id="50ebf-201">Скрипты XSLT следует включать только при необходимости в поддержке скриптов и при работе в полностью доверенной среде.</span><span class="sxs-lookup"><span data-stu-id="50ebf-201">XSLT scripting should be enabled only if you require script support and you are working in a fully trusted environment.</span></span>  
  
-   <span data-ttu-id="50ebf-202">Функция XSLT `document()` отключена по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="50ebf-202">The XSLT `document()` function is disabled by default.</span></span> <span data-ttu-id="50ebf-203">Если функция `document()` включена, ограничьте ресурсы, к которым можно получить доступ путем передачи объекта <xref:System.Xml.XmlSecureResolver> методу <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="50ebf-203">If you enable the `document()` function, restrict the resources that can be accessed by passing an <xref:System.Xml.XmlSecureResolver> object to the <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A?displayProperty=nameWithType> method.</span></span>  
  
-   <span data-ttu-id="50ebf-204">Объекты расширения по умолчанию включены.</span><span class="sxs-lookup"><span data-stu-id="50ebf-204">Extension objects are enabled by default.</span></span> <span data-ttu-id="50ebf-205">Если методу <xref:System.Xml.Xsl.XsltArgumentList> передается объект <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A?displayProperty=nameWithType>, содержащий объекты расширения, то используются объекты расширения.</span><span class="sxs-lookup"><span data-stu-id="50ebf-205">If an <xref:System.Xml.Xsl.XsltArgumentList> object that contains extension objects is passed to the <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A?displayProperty=nameWithType> method, the extension objects are used.</span></span>  
  
-   <span data-ttu-id="50ebf-206">Таблицы стилей XSLT могут содержать ссылки на другие файлы и внедренные блоки скриптов.</span><span class="sxs-lookup"><span data-stu-id="50ebf-206">XSLT style sheets can include references to other files and embedded script blocks.</span></span> <span data-ttu-id="50ebf-207">Этим может воспользоваться злонамеренный пользователь: он может передать такие данные или таблицы стилей, которые при выполнении будут задействовать все доступные ресурсы компьютера.</span><span class="sxs-lookup"><span data-stu-id="50ebf-207">A malicious user can exploit this by supplying you with data or style sheets that, when executed, can cause your system to process until the computer runs low on resources.</span></span>  
  
-   <span data-ttu-id="50ebf-208">Приложения XSLT, работающие в смешанной доверенной среде может привести подделке таблицы стилей.</span><span class="sxs-lookup"><span data-stu-id="50ebf-208">XSLT apps that run in a mixed trust environment can result in style sheet spoofing.</span></span> <span data-ttu-id="50ebf-209">Например, злонамеренный пользователь может загрузить объект с вредоносной таблицей стилей и передать ее другому пользователю, который впоследствии вызовет метод <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A?displayProperty=nameWithType> и выполнит преобразование.</span><span class="sxs-lookup"><span data-stu-id="50ebf-209">For example, a malicious user can load an object with a harmful style sheet and hand it off to another user who subsequently calls the <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A?displayProperty=nameWithType> method and executes the transformation.</span></span>  
  
 <span data-ttu-id="50ebf-210">Чтобы избежать этих проблем безопасности, не следует включатьскрипты или функцию `document()`, если таблица стилей поступает не из надежного источника, а также не следует принимать объекты <xref:System.Xml.Xsl.XslCompiledTransform>, таблицы стилей XSLT или исходные XML-данные из ненадежных источников.</span><span class="sxs-lookup"><span data-stu-id="50ebf-210">These security issues can be mitigated by not enabling scripting or the `document()` function unless the style sheet comes from a trusted source, and by not accepting <xref:System.Xml.Xsl.XslCompiledTransform> objects, XSLT style sheets, or XML source data from an untrusted source.</span></span>  
  
 <span data-ttu-id="50ebf-211">**Обработка исключений**</span><span class="sxs-lookup"><span data-stu-id="50ebf-211">**Exception handling**</span></span>  
  
 <span data-ttu-id="50ebf-212">Исключения, вызванные компонентами нижнего уровня могут содержать сведения о пути, которые не требуется доступ к приложению.</span><span class="sxs-lookup"><span data-stu-id="50ebf-212">Exceptions thrown by lower level components can disclose path information that you do not want exposed to the app.</span></span> <span data-ttu-id="50ebf-213">Приложения должны перехватывать исключения и обрабатывать их соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="50ebf-213">Your apps must catch exceptions and process them appropriately.</span></span>  
  
 ]]></format>
    </remarks>
    <altmember cref="N:System.Xml.Xsl" />
    <altmember cref="N:System.Xml.Schema" />
    <altmember cref="N:System.Xml.Linq" />
    <related type="Article" href="http://msdn.microsoft.com/library/e695047f-3c0f-4045-8708-5baea91cc380">
      <span data-ttu-id="50ebf-214">XML-документы и данные</span>
      <span class="sxs-lookup">
        <span data-stu-id="50ebf-214">XML Documents and Data</span>
      </span>
    </related>
  </Docs>
</Namespace>